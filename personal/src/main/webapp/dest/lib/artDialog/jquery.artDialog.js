/*!
 * artDialog 4.1.6
 * Date: 2012-07-16 22:57
 * http://code.google.com/p/artdialog/
 * (c) 2009-2012 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */

!function(t,e,i){t.noop=t.noop||function(){};var n,s,o,a,l=0,c=t(e),r=t(document),u=t("html");o=document.documentElement;var d=e.VBArray&&!e.XMLHttpRequest,h="createTouch"in document&&!("onmousemove"in o)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),f="artDialog"+ +new Date,p=function(e,s,o){e=e||{},"string"!=typeof e&&1!==e.nodeType||(e={content:e,fixed:!h});var a;a=p.defaults;var c,r=e.follow=1===this.nodeType&&this||e.follow;for(c in a)e[c]===i&&(e[c]=a[c]);return t.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(t,n){e[t]=e[t]!==i?e[t]:e[n]}),"string"==typeof r&&(r=t(r)[0]),e.id=r&&r[f+"follow"]||e.id||f+l,a=p.list[e.id],r&&a?a.follow(r).zIndex().focus():a?a.zIndex().focus():(h&&(e.fixed=!1),t.isArray(e.button)||(e.button=e.button?[e.button]:[]),s!==i&&(e.ok=s),o!==i&&(e.cancel=o),e.ok&&e.button.push({name:e.okVal,callback:e.ok,focus:!0}),e.cancel&&e.button.push({name:e.cancelVal,callback:e.cancel}),p.defaults.zIndex=e.zIndex,l++,p.list[e.id]=n?n._init(e):new p.fn._init(e))};if(p.fn=p.prototype={version:"4.1.6",closed:!0,_init:function(t){var i,s=t.icon,o=s&&(d?{png:"icons/"+s+".png"}:{backgroundImage:"url('"+t.path+"/skins/icons/"+s+".png')"});return this.closed=!1,this.config=t,this.DOM=i=this.DOM||this._getDOM(),i.wrap.addClass(t.skin),i.close[!1===t.cancel?"hide":"show"](),i.icon[0].style.display=s?"":"none",i.iconBg.css(o||{background:"none"}),i.se.css("cursor",t.resize?"se-resize":"auto"),i.title.css("cursor",t.drag?"move":"auto"),i.content.css("padding",t.padding),this[t.show?"show":"hide"](!0),this.button(t.button).title(t.title).content(t.content,!0).size(t.width,t.height).time(t.time),t.follow?this.follow(t.follow):this.position(t.left,t.top),this.zIndex().focus(),t.lock&&this.lock(),this._addEvent(),this._ie6PngFix(),n=null,t.init&&t.init.call(this,e),this},content:function(t,e){var n,s,o,a,l=this,c=l.DOM,r=c.wrap[0],u=r.offsetWidth,d=r.offsetHeight,h=parseInt(r.style.left),f=parseInt(r.style.top),p=r.style.width,c=c.content,m=c[0];return l._elemBack&&l._elemBack(),r.style.width="auto",t===i?m:("string"==typeof t?c.html(t):t&&1===t.nodeType&&(a=t.style.display,n=t.previousSibling,s=t.nextSibling,o=t.parentNode,l._elemBack=function(){n&&n.parentNode?n.parentNode.insertBefore(t,n.nextSibling):s&&s.parentNode?s.parentNode.insertBefore(t,s):o&&o.appendChild(t),t.style.display=a,l._elemBack=null},c.html(""),m.appendChild(t),t.style.display="block"),e||(l.config.follow?l.follow(l.config.follow):(u=r.offsetWidth-u,d=r.offsetHeight-d,f-=d/2,r.style.left=Math.max(h-u/2,0)+"px",r.style.top=Math.max(f,0)+"px"),p&&"auto"!==p&&(r.style.width=r.offsetWidth+"px"),l._autoPositionType()),l._ie6SelectFix(),l._runScript(m),l)},title:function(t){var e=this.DOM,n=e.wrap,e=e.title;return t===i?e[0]:(!1===t?(e.hide().html(""),n.addClass("aui_state_noTitle")):(e.show().html(t||""),n.removeClass("aui_state_noTitle")),this)},position:function(t,e){var n=this.config,s=this.DOM.wrap[0],o=!d&&n.fixed,n=d&&this.config.fixed,a=r.scrollLeft(),l=r.scrollTop(),u=o?0:a,o=o?0:l,h=c.width(),f=c.height(),p=s.offsetWidth,m=s.offsetHeight,s=s.style;return(t||0===t)&&(this._left=-1!==t.toString().indexOf("%")?t:null,t=this._toNumber(t,h-p),"number"==typeof t?(t=n?t+=a:t+u,s.left=Math.max(t,u)+"px"):"string"==typeof t&&(s.left=t)),(e||0===e)&&(this._top=-1!==e.toString().indexOf("%")?e:null,e=this._toNumber(e,f-m),"number"==typeof e?(e=n?e+=l:e+o,s.top=Math.max(e,o)+"px"):"string"==typeof e&&(s.top=e)),t!==i&&e!==i&&(this._follow=null,this._autoPositionType()),this},size:function(t,e){var i,n,s=this.DOM;n=s.wrap;var o=s.main,a=n[0].style,s=o[0].style;return t&&(this._width=-1!==t.toString().indexOf("%")?t:null,i=c.width()-n[0].offsetWidth+o[0].offsetWidth,t=i=this._toNumber(t,i),"number"==typeof t?(a.width="auto",s.width=Math.max(this.config.minWidth,t)+"px",a.width=n[0].offsetWidth+"px"):"string"==typeof t&&(s.width=t,"auto"===t&&n.css("width","auto"))),e&&(this._height=-1!==e.toString().indexOf("%")?e:null,n=c.height()-n[0].offsetHeight+o[0].offsetHeight,e=n=this._toNumber(e,n),"number"==typeof e?s.height=Math.max(this.config.minHeight,e)+"px":"string"==typeof e&&(s.height=e)),this._ie6SelectFix(),this},follow:function(e){var i,n=this.config;if(("string"==typeof e||e&&1===e.nodeType)&&(i=t(e),e=i[0]),!e||!e.offsetWidth&&!e.offsetHeight)return this.position(this._left,this._top);var s=f+"follow",o=c.width(),a=c.height(),l=r.scrollLeft(),u=r.scrollTop(),h=i.offset();i=e.offsetWidth;var p=!d&&n.fixed,m=p?h.left-l:h.left,h=p?h.top-u:h.top,g=this.DOM.wrap[0],_=g.style,v=g.offsetWidth,g=g.offsetHeight,x=m-(v-i)/2,b=h+e.offsetHeight,l=p?0:l,u=p?0:u;return _.left=(x<l?m:x+v>o&&m-v>l?m-v+i:x)+"px",_.top=(b+g>a+u&&h-g>u?h-g:b)+"px",this._follow&&this._follow.removeAttribute(s),this._follow=e,e[s]=n.id,this._autoPositionType(),this},button:function(){var e=this,n=arguments,s=e.DOM.buttons,o=s[0],a=e._listeners=e._listeners||{},l=t.isArray(n[0])?n[0]:[].slice.call(n);return n[0]===i?o:(t.each(l,function(i,n){var s=n.name,l=!a[s],c=l?document.createElement("button"):a[s].elem;a[s]||(a[s]={}),n.callback&&(a[s].callback=n.callback),n.className&&(c.className=n.className),n.focus&&(e._focus&&e._focus.removeClass("aui_state_highlight"),e._focus=t(c).addClass("aui_state_highlight"),e.focus()),c.setAttribute("type","button"),c[f+"callback"]=s,c.disabled=!!n.disabled,l&&(c.innerHTML=s,a[s].elem=c,o.appendChild(c))}),s[0].style.display=l.length?"":"none",e._ie6SelectFix(),e)},show:function(t){return this.DOM.wrap.show(),!t&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(t){return this.DOM.wrap.hide(),!t&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(){if(this.closed)return this;var t=this.DOM,i=t.wrap,s=p.list,o=this.config.close,a=this.config.follow;if(this.time(),"function"==typeof o&&!1===o.call(this,e))return this;this.unlock(),this._elemBack&&this._elemBack(),i[0].className=i[0].style.cssText="",t.title.html(""),t.content.html(""),t.buttons.html(""),p.focus===this&&(p.focus=null),a&&a.removeAttribute(f+"follow"),delete s[this.config.id],this._removeEvent(),this.hide(!0)._setAbsolute();for(var l in this)this.hasOwnProperty(l)&&"DOM"!==l&&delete this[l];return n?i.remove():n=this,this},time:function(t){var e=this,i=e.config.cancelVal,n=e._timer;return n&&clearTimeout(n),t&&(e._timer=setTimeout(function(){e._click(i)},1e3*t)),e},focus:function(){try{var t=this._focus&&this._focus[0]||this.DOM.close[0];t&&t.focus()}catch(t){}return this},zIndex:function(){var t=this.DOM.wrap,e=p.focus,i=p.defaults.zIndex++;return t.css("zIndex",i),this._lockMask&&this._lockMask.css("zIndex",i-1),e&&e.DOM.wrap.removeClass("aui_state_focus"),p.focus=this,t.addClass("aui_state_focus"),this},lock:function(){if(this._lock)return this;var e=this,i=p.defaults.zIndex-1,n=e.DOM.wrap,s=e.config,o=r.width(),a=r.height(),l=e._lockMaskWrap||t(document.body.appendChild(document.createElement("div"))),c=e._lockMask||t(l[0].appendChild(document.createElement("div"))),o=h?"width:"+o+"px;height:"+a+"px":"width:100%;height:100%",a=d?"position:absolute;left:expression((document).documentElement.scrollLeft);top:expression((document).documentElement.scrollTop);width:expression((document).documentElement.clientWidth);height:expression((document).documentElement.clientHeight)":"";return e.zIndex(),n.addClass("aui_state_lock"),l[0].style.cssText=o+";position:fixed;z-index:"+i+";top:0;left:0;overflow:hidden;"+a,c[0].style.cssText="height:100%;background:"+s.background+";filter:alpha(opacity=0);opacity:0",d&&c.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>'),c.stop(),c.bind("click",function(){e._reset()}).bind("dblclick",function(){e._click(e.config.cancelVal)}),0===s.duration?c.css({opacity:s.opacity}):c.animate({opacity:s.opacity},s.duration),e._lockMaskWrap=l,e._lockMask=c,e._lock=!0,e},unlock:function(){var t=this._lockMaskWrap,e=this._lockMask;if(!this._lock)return this;var i=t[0].style,s=function(){d&&(i.removeExpression("width"),i.removeExpression("height"),i.removeExpression("left"),i.removeExpression("top")),i.cssText="display:none",n&&t.remove()};return e.stop().unbind(),this.DOM.wrap.removeClass("aui_state_lock"),this.config.duration?e.animate({opacity:0},this.config.duration,s):s(),this._lock=!1,this},_getDOM:function(){var e=document.createElement("div"),i=document.body;e.style.cssText="position:absolute;left:0;top:0",e.innerHTML=p._templates,i.insertBefore(e,i.firstChild);for(var i=0,n={wrap:t(e)},s=e.getElementsByTagName("*"),o=s.length;i<o;i++)(e=s[i].className.split("aui_")[1])&&(n[e]=t(s[i]));return n},_toNumber:function(t,e){if(!t&&0!==t||"number"==typeof t)return t;var i=t.length-1;return t.lastIndexOf("px")===i?t=parseInt(t):t.lastIndexOf("%")===i&&(t=parseInt(e*t.split("%")[0]/100)),t},_ie6PngFix:d?function(){for(var t,e,i=0,n=p.defaults.path+"/skins/",s=this.DOM.wrap[0].getElementsByTagName("*");i<s.length;i++)t=s[i],(e=t.currentStyle.png)&&(e=n+e,t=t.runtimeStyle,t.backgroundImage="none",t.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='crop')")}:t.noop,_ie6SelectFix:d?function(){var t=this.DOM.wrap,e=t[0],i=f+"iframeMask",n=t[i],s=e.offsetWidth,o=e.offsetHeight,s=s+"px",o=o+"px";n?(n.style.width=s,n.style.height=o):(n=e.appendChild(document.createElement("iframe")),t[i]=n,n.src="about:blank",n.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+s+";height:"+o)}:t.noop,_runScript:function(t){for(var e,i=e=0,t=t.getElementsByTagName("script"),n=t.length,s=[];e<n;e++)"text/dialog"===t[e].type&&(s[i]=t[e].innerHTML,i++);s.length&&(s=s.join(""),e=new Function(s),e.call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){return d&&t(function(){"fixed"!==u.css("backgroundAttachment")&&"fixed"!==t("body").css("backgroundAttachment")&&u.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}),function(){var t=this.DOM.wrap,e=t[0].style;if(d){var i=parseInt(t.css("left")),t=parseInt(t.css("top")),n=r.scrollLeft(),s=r.scrollTop();this._setAbsolute(),e.setExpression("left","eval((document.documentElement).scrollLeft + "+(i-n)+') + "px"'),e.setExpression("top","eval((document.documentElement).scrollTop + "+(t-s)+') + "px"')}else e.position="fixed"}}(),_setAbsolute:function(){var t=this.DOM.wrap[0].style;d&&(t.removeExpression("left"),t.removeExpression("top")),t.position="absolute"},_click:function(t){return t=this._listeners[t]&&this._listeners[t].callback,"function"!=typeof t||!1!==t.call(this,e)?this.close():this},_reset:function(t){var e=this._winSize||c.width()*c.height(),i=this._follow,n=this._width,s=this._height,o=this._left,a=this._top;t&&(t=this._winSize=c.width()*c.height(),e===t)||((n||s)&&this.size(n,s),i?this.follow(i):(o||a)&&this.position(o,a))},_addEvent:function(){var t,i=this,n=i.config,s="CollectGarbage"in e,o=i.DOM;i._winResize=function(){t&&clearTimeout(t),t=setTimeout(function(){i._reset(s)},40)},c.bind("resize",i._winResize),o.wrap.bind("click",function(t){return t=t.target,!t.disabled&&(t===o.close[0]?(i._click(n.cancelVal),!1):((t=t[f+"callback"])&&i._click(t),void i._ie6SelectFix()))}).bind("mousedown",function(){i.zIndex()})},_removeEvent:function(){this.DOM.wrap.unbind(),c.unbind("resize",this._winResize)}},p.fn._init.prototype=p.fn,t.fn.dialog=t.fn.artDialog=function(){var t=arguments;return this[this.live?"live":"bind"]("click",function(){return p.apply(this,t),!1}),this},p.focus=null,p.get=function(t){return t===i?p.list:p.list[t]},p.list={},r.bind("keydown",function(t){var e=t.target.nodeName,i=/^INPUT|TEXTAREA$/,n=p.focus,t=t.keyCode;n&&n.config.esc&&!i.test(e)&&27===t&&n._click(n.config.cancelVal)}),a=e._artDialog_path||function(t,e,i){for(e in t)t[e].src&&-1!==t[e].src.indexOf("artDialog")&&(i=t[e]);return s=i||t[t.length-1],i=s.src.replace(/\\/g,"/"),0>i.lastIndexOf("/")?".":i.substring(0,i.lastIndexOf("/"))}(document.getElementsByTagName("script")),o=s.src.split("skin=")[1]){var m=document.createElement("link");m.rel="stylesheet",m.href=a+"/skins/"+o+".css?"+p.fn.version,s.parentNode.insertBefore(m,s)}c.bind("load",function(){setTimeout(function(){l||p({left:"-9999em",time:9,fixed:!1,lock:!1,focus:!1})},150)});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}p._templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><a class="aui_close" href="javascript:/*artDialog*/;">×</a></div></td></tr><tr><td class="aui_icon"><div class="aui_iconBg"></div></td><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></div></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>',p.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"消息",button:null,ok:null,cancel:null,init:null,close:null,okVal:"确定",cancelVal:"取消",width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"20px 25px",skin:"",icon:null,time:null,esc:!0,focus:!0,show:!0,follow:null,path:a,lock:!1,background:"#000",opacity:.7,duration:300,fixed:!1,left:"50%",top:"38.2%",zIndex:1987,resize:!0,drag:!0},e.artDialog=t.dialog=t.artDialog=p}(this.art||this.jQuery&&(this.art=jQuery),this),function(t){var e,i,n=t(window),s=t(document),o=document.documentElement,a=!("minWidth"in o.style),l="onlosecapture"in o,c="setCapture"in o;artDialog.dragEvent=function(){var t=this,e=function(e){var i=t[e];t[e]=function(){return i.apply(t,arguments)}};e("start"),e("move"),e("end")},artDialog.dragEvent.prototype={onstart:t.noop,start:function(t){return s.bind("mousemove",this.move).bind("mouseup",this.end),this._sClientX=t.clientX,this._sClientY=t.clientY,this.onstart(t.clientX,t.clientY),!1},onmove:t.noop,move:function(t){return this._mClientX=t.clientX,this._mClientY=t.clientY,this.onmove(t.clientX-this._sClientX,t.clientY-this._sClientY),!1},onend:t.noop,end:function(t){return s.unbind("mousemove",this.move).unbind("mouseup",this.end),this.onend(t.clientX,t.clientY),!1}},i=function(t){var i,o,r,u,d,h,f=artDialog.focus,p=f.DOM,m=p.wrap,g=p.title,_=p.main,v="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(t){}};e.onstart=function(){h?(o=_[0].offsetWidth,r=_[0].offsetHeight):(u=m[0].offsetLeft,d=m[0].offsetTop),s.bind("dblclick",e.end),!a&&l?g.bind("losecapture",e.end):n.bind("blur",e.end),c&&g[0].setCapture(),m.addClass("aui_state_drag"),f.focus()},e.onmove=function(t,e){if(h){var n=m[0].style,s=_[0].style,a=t+o,l=e+r;n.width="auto",s.width=Math.max(0,a)+"px",n.width=m[0].offsetWidth+"px",s.height=Math.max(0,l)+"px"}else s=m[0].style,n=Math.max(i.minX,Math.min(i.maxX,t+u)),a=Math.max(i.minY,Math.min(i.maxY,e+d)),s.left=n+"px",s.top=a+"px";v(),f._ie6SelectFix()},e.onend=function(){s.unbind("dblclick",e.end),!a&&l?g.unbind("losecapture",e.end):n.unbind("blur",e.end),c&&g[0].releaseCapture(),a&&!f.closed&&f._autoPositionType(),m.removeClass("aui_state_drag")},h=t.target===p.se[0],i=function(){var t=f.DOM.wrap[0],e="fixed"===t.style.position,i=t.offsetWidth,t=t.offsetHeight,o=n.width(),a=n.height(),l=e?0:s.scrollLeft(),e=e?0:s.scrollTop();return{minX:l,minY:e,maxX:o-i+l,maxY:a-t+e}}(),e.start(t)},s.bind("mousedown",function(t){var n=artDialog.focus;if(n){var s=t.target,o=n.config,n=n.DOM;if(!1!==o.drag&&s===n.title[0]||!1!==o.resize&&s===n.se[0])return e=e||new artDialog.dragEvent,i(t),!1}})}(this.art||this.jQuery&&(this.art=jQuery));