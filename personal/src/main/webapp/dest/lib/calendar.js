!function(e){return define&&define.amd&&"function"==typeof define?define(e):e(jQuery)}(!function(e){function t(){e("._jt").on("click","td",function(){r.onDayChange&&"function"==typeof r.onDayChange&&r.onDayChange(new Date(e(this).attr("data-date")).getTime())}),e("._cal").off("change").on("change"," .yearSelect,.monthSelect",function(){var t;this.className.indexOf("year")>=0?(e.extend(r,{year:e(this).val()-0,month:e(".monthSelect").val()-1}),t=r.onYearChange):this.className.indexOf("month")>=0&&(e.extend(r,{month:e(this).val()-1,year:e(".yearSelect").val()-0}),t=r.onMonthChange),t&&"function"==typeof t&&t(r.year,r.month),methods.init.call(l,r)}),e("._cal").off("click").on("click"," .prevMonth,.nextMonth",function(t){var n=e(".monthSelect"),a=e(".yearSelect");this.className.indexOf("prev")>=0?n.val()-0===1?(n.val(12),a.val(a.val()-1)):n.val(n.val()-1):this.className.indexOf("next")>=0&&(n.val()-0===12?(n.val(1),a.val(a.val()-0+1)):n.val(n.val()-0+1)),e.extend(r,{month:e(".monthSelect").val()-1,year:e(".yearSelect").val()-0}),r.onMonthChange&&"function"==typeof r.onMonthChange&&r.onMonthChange(r.year,r.month),methods.init.call(l,r)})}function n(t){if(e("._cal").length<=0){bgroup="<div class='_cal'><select class='yearSelect'>";for(var n=1949;n<=2050;n++){var a="";n===t.getFullYear()&&(a="selected"),bgroup+="<option value='"+n+"' "+a+">"+n+"</option>"}bgroup+="</select><div class='t_r'><button class='prevMonth'>&lt;</button><select class='monthSelect'>";for(var n=1;n<=12;n++){var a="";n===t.getMonth()+1&&(a="selected"),bgroup+="<option value='"+n+"' "+a+">"+n+"</option>"}return bgroup+="</select><button class='nextMonth'>&gt;</button></div>",bgroup}return e(".yearSelect").val(t.getFullYear()),e(".monthSelect").val(t.getMonth()+1),""}function a(t){for(var a=["日","一","二","三","四","五","六"],o=1,l=new Date(t.year,t.month),r=(a[l.getDay()],new Date(t.year,t.month,1).getDay()),c=new Date(t.year,t.month+1,0).getDate(),h=n(l)+"<table class='_jt'><thead><tr>",i=0;i<7;i++)h+="<th>"+a[i]+"</th>";h+="</tr></thead><tbody>";for(var s=Math.ceil((c+r)/7),f=1;f<=s;f++){h+="<tr>";for(var u=0;u<7;u++){var d="";u<r&&1===f||o>c?h+="<td></td>":(o===t.day&&(d="selected"),h+='<td data-date="'+t.year+"-"+(t.month+1)+"-"+o+'" class="'+d+'">'+o++ +"</td>")}h+="</tr>"}h+="</tbody></table>",e("table._jt").remove(),e(h).appendTo(this)}function o(t){e.fn._default={year:(new Date).getFullYear(),month:(new Date).getMonth(),day:(new Date).getDate(),onYearChange:function(){},onMonthChange:function(){},onDayChange:function(){}},this.options=r=e.extend({},e.fn._default,t),this.render()}var l=null,r={};return e.extend({},o.prototype,{render:function(){a.call(this,options),t()}}),e.fn.calendar=function(e){return this.each(function(){new o(e)})},o}(jQuery));